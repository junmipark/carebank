<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="meals">
	<select id="selectMeal" resultType="mealDto" parameterType="int">
		SELECT DISTINCT * FROM MEAL WHERE SUBCAT_ID = ${subcat_id}
	</select>
	<select id="selectFood" resultType="String" parameterType="int">
		SELECT DISTINCT FOOD FROM MEAL JOIN INGREDIENT USING(MEAL_ID,
		SUBCAT_ID) WHERE SUBCAT_ID = ${subcat_id}
	</select>
	<select id="selectCategory" resultType="String"
		parameterType="int">
		SELECT SUBCAT_NAME FROM CATEGORY WHERE SUBCAT_ID =
		${subcat_id}
	</select>
	<select id="selectOne" resultType="mealDto" parameterType="int">
		SELECT *
		FROM MEAL
		WHERE MEAL_ID = ${meal_id}
	</select>
	<select id="selectIngredient" resultType="foodDto"
		parameterType="int">
		SELECT FOOD, DESCRIPTION, CARBO, PROTEIN, FAT, CALORIES
		FROM (MEAL JOIN INGREDIENT i USING(MEAL_ID, SUBCAT_ID)) JOIN NUTRIENT n USING(FOOD)
		WHERE MEAL_ID = ${meal_id}
	</select>
</mapper>